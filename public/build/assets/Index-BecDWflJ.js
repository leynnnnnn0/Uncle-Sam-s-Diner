import{a as ve,j as t,r as c,c as m,b as W,H as Ne,I as ye,T as be,t as Z}from"./app-inPynzut.js";import{M as we}from"./module-heading-BMzjbDBo.js";import{b as Q,B as H}from"./button-BJEm2njI.js";import{c as Ae,C as De,a as Ce,b as _e,d as Se}from"./card-Gd4hW5p5.js";import{B as J}from"./badge-D6d7HRTh.js";import{A as $e,a as Te}from"./alert-BuRkCFDL.js";import{c as ke,a as Le}from"./index-Ckno6hAz.js";import{u as X,c as j}from"./mainLogo-BT6DcaXZ.js";import{c as ee,T as Pe,D as Ee,C as te,W as Re,a as Me,R as Ie,P as Oe,b as Fe,O as ze,A as Be}from"./index-DHSHhyI-.js";import{T as He,a as We,b as Ye,c as Ve,A as qe}from"./app-layout-BQeK_rV1.js";import{S as K}from"./sparkles-DC3XZ4mF.js";import{P as Ge}from"./plus-Bb-_fg_D.js";import{E as Ze}from"./eye-Bkw8toe-.js";import{T as Ue}from"./trash-2-Bq6WCTu-.js";/* empty css            */import"./index-DT90gE-g.js";import"./dropdown-menu-CUuHBfB6.js";import"./index-BuE5uGPR.js";import"./index-D6b3eXot.js";import"./qr-code-EFbsLKsZ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ke=ve("SquarePen",Je);var Qe=Symbol("radix.slottable");function Xe(r){const e=({children:s})=>t.jsx(t.Fragment,{children:s});return e.displayName=`${r}.Slottable`,e.__radixId=Qe,e}var se="AlertDialog",[et,es]=ke(se,[ee]),f=ee(),ae=r=>{const{__scopeAlertDialog:e,...s}=r,a=f(e);return t.jsx(Ie,{...a,...s,modal:!0})};ae.displayName=se;var tt="AlertDialogTrigger",st=c.forwardRef((r,e)=>{const{__scopeAlertDialog:s,...a}=r,l=f(s);return t.jsx(Fe,{...l,...a,ref:e})});st.displayName=tt;var at="AlertDialogPortal",le=r=>{const{__scopeAlertDialog:e,...s}=r,a=f(e);return t.jsx(Oe,{...a,...s})};le.displayName=at;var lt="AlertDialogOverlay",re=c.forwardRef((r,e)=>{const{__scopeAlertDialog:s,...a}=r,l=f(s);return t.jsx(ze,{...l,...a,ref:e})});re.displayName=lt;var C="AlertDialogContent",[rt,ot]=et(C),it=Xe("AlertDialogContent"),oe=c.forwardRef((r,e)=>{const{__scopeAlertDialog:s,children:a,...l}=r,o=f(s),d=c.useRef(null),_=X(e,d),v=c.useRef(null);return t.jsx(Re,{contentName:C,titleName:ie,docsSlug:"alert-dialog",children:t.jsx(rt,{scope:s,cancelRef:v,children:t.jsxs(Me,{role:"alertdialog",...o,...l,ref:_,onOpenAutoFocus:Le(l.onOpenAutoFocus,p=>{p.preventDefault(),v.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[t.jsx(it,{children:a}),t.jsx(ct,{contentRef:d})]})})})});oe.displayName=C;var ie="AlertDialogTitle",ne=c.forwardRef((r,e)=>{const{__scopeAlertDialog:s,...a}=r,l=f(s);return t.jsx(Pe,{...l,...a,ref:e})});ne.displayName=ie;var ce="AlertDialogDescription",de=c.forwardRef((r,e)=>{const{__scopeAlertDialog:s,...a}=r,l=f(s);return t.jsx(Ee,{...l,...a,ref:e})});de.displayName=ce;var nt="AlertDialogAction",me=c.forwardRef((r,e)=>{const{__scopeAlertDialog:s,...a}=r,l=f(s);return t.jsx(te,{...l,...a,ref:e})});me.displayName=nt;var pe="AlertDialogCancel",xe=c.forwardRef((r,e)=>{const{__scopeAlertDialog:s,...a}=r,{cancelRef:l}=ot(pe,s),o=f(s),d=X(e,l);return t.jsx(te,{...o,...a,ref:d})});xe.displayName=pe;var ct=({contentRef:r})=>{const e=`\`${C}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${C}\` by passing a \`${ce}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${C}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(r.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},dt=ae,mt=le,pt=re,xt=oe,ht=me,ft=xe,gt=ne,ut=de;function jt(r){const e=m.c(4);let s;e[0]!==r?({...s}=r,e[0]=r,e[1]=s):s=e[1];let a;return e[2]!==s?(a=t.jsx(dt,{"data-slot":"alert-dialog",...s}),e[2]=s,e[3]=a):a=e[3],a}function vt(r){const e=m.c(4);let s;e[0]!==r?({...s}=r,e[0]=r,e[1]=s):s=e[1];let a;return e[2]!==s?(a=t.jsx(mt,{"data-slot":"alert-dialog-portal",...s}),e[2]=s,e[3]=a):a=e[3],a}function Nt(r){const e=m.c(8);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]!==s?(l=j("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),e[3]=s,e[4]=l):l=e[4];let o;return e[5]!==a||e[6]!==l?(o=t.jsx(pt,{"data-slot":"alert-dialog-overlay",className:l,...a}),e[5]=a,e[6]=l,e[7]=o):o=e[7],o}function yt(r){const e=m.c(9);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(Nt,{}),e[3]=l):l=e[3];let o;e[4]!==s?(o=j("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),e[4]=s,e[5]=o):o=e[5];let d;return e[6]!==a||e[7]!==o?(d=t.jsxs(vt,{children:[l,t.jsx(xt,{"data-slot":"alert-dialog-content",className:o,...a})]}),e[6]=a,e[7]=o,e[8]=d):d=e[8],d}function bt(r){const e=m.c(8);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]!==s?(l=j("flex flex-col gap-2 text-center sm:text-left",s),e[3]=s,e[4]=l):l=e[4];let o;return e[5]!==a||e[6]!==l?(o=t.jsx("div",{"data-slot":"alert-dialog-header",className:l,...a}),e[5]=a,e[6]=l,e[7]=o):o=e[7],o}function wt(r){const e=m.c(8);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]!==s?(l=j("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),e[3]=s,e[4]=l):l=e[4];let o;return e[5]!==a||e[6]!==l?(o=t.jsx("div",{"data-slot":"alert-dialog-footer",className:l,...a}),e[5]=a,e[6]=l,e[7]=o):o=e[7],o}function At(r){const e=m.c(8);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]!==s?(l=j("text-lg font-semibold",s),e[3]=s,e[4]=l):l=e[4];let o;return e[5]!==a||e[6]!==l?(o=t.jsx(gt,{"data-slot":"alert-dialog-title",className:l,...a}),e[5]=a,e[6]=l,e[7]=o):o=e[7],o}function Dt(r){const e=m.c(8);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]!==s?(l=j("text-muted-foreground text-sm",s),e[3]=s,e[4]=l):l=e[4];let o;return e[5]!==a||e[6]!==l?(o=t.jsx(ut,{"data-slot":"alert-dialog-description",className:l,...a}),e[5]=a,e[6]=l,e[7]=o):o=e[7],o}function Ct(r){const e=m.c(8);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]!==s?(l=j(Q(),s),e[3]=s,e[4]=l):l=e[4];let o;return e[5]!==a||e[6]!==l?(o=t.jsx(ht,{className:l,...a}),e[5]=a,e[6]=l,e[7]=o):o=e[7],o}function _t(r){const e=m.c(8);let s,a;e[0]!==r?({className:s,...a}=r,e[0]=r,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let l;e[3]!==s?(l=j(Q({variant:"outline"}),s),e[3]=s,e[4]=l):l=e[4];let o;return e[5]!==a||e[6]!==l?(o=t.jsx(ft,{className:l,...a}),e[5]=a,e[6]=l,e[7]=o):o=e[7],o}function ts(r){const e=m.c(31),{cardTemplates:s}=r;let a;e[0]!==s?(a=s===void 0?[]:s,e[0]=s,e[1]=a):a=e[1];const l=a,[o,d]=c.useState(null),[_,v]=c.useState(!1),[p,Y]=c.useState(null),he=Pt;let $;e[2]===Symbol.for("react.memo_cache_sentinel")?($=g=>{Y(g),v(!0)},e[2]=$):$=e[2];const fe=$;let T;e[3]!==p?(T=()=>{p&&(W.delete(`/business/card-templates/${p}`,{onSuccess:Lt,onError:kt}),v(!1),Y(null))},e[3]=p,e[4]=T):T=e[4];const V=T;let k;e[5]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{v(!1),Y(null)},e[5]=k):k=e[5];const ge=k,ue=Tt,je=$t;let L;e[6]!==o?(L=g=>{const{shape:i,isFilled:u,isReward:h,rewardText:F,filledColor:N,emptyColor:q,stampImage:n,details:G,index:x}=g,z=u?N:q,B=u?"#FFFFFF":"#D1D5DB",U={circle:t.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[t.jsx("defs",{children:n&&t.jsx("pattern",{id:`stampPattern-${x}`,x:"0",y:"0",width:"1",height:"1",children:t.jsx("image",{href:`/${n}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),t.jsx("circle",{cx:"50",cy:"50",r:"45",fill:n&&u?`url(#stampPattern-${x})`:z,stroke:B,strokeWidth:"3"})]}),star:t.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[t.jsx("defs",{children:n&&t.jsx("pattern",{id:`stampPattern-${x}`,x:"0",y:"0",width:"1",height:"1",children:t.jsx("image",{href:`/${n}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),t.jsx("path",{d:"M50 5 L55 20 L70 15 L70 30 L85 35 L75 47 L85 59 L70 64 L70 79 L55 74 L50 89 L45 74 L30 79 L30 64 L15 59 L25 47 L15 35 L30 30 L30 15 L45 20 Z",fill:n&&u?`url(#stampPattern-${x})`:z,stroke:B,strokeWidth:"3"})]}),square:t.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[t.jsx("defs",{children:n&&t.jsx("pattern",{id:`stampPattern-${x}`,x:"0",y:"0",width:"1",height:"1",children:t.jsx("image",{href:`/${n}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),t.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"12",fill:n&&u?`url(#stampPattern-${x})`:z,stroke:B,strokeWidth:"3"})]}),hexagon:t.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 100 100",className:"drop-shadow transition-all duration-300 w-full h-full",children:[t.jsx("defs",{children:n&&t.jsx("pattern",{id:`stampPattern-${x}`,x:"0",y:"0",width:"1",height:"1",children:t.jsx("image",{href:`/${n}`,x:"0",y:"0",width:"100",height:"100",preserveAspectRatio:"xMidYMid slice"})})}),t.jsx("path",{d:"M50 5 L90 27.5 L90 72.5 L50 95 L10 72.5 L10 27.5 Z",fill:n&&u?`url(#stampPattern-${x})`:z,stroke:B,strokeWidth:"3"})]})};return t.jsxs("div",{className:"relative group",onMouseEnter:()=>h&&G&&d(`${x}`),onMouseLeave:()=>d(null),children:[U[i]||U.circle,h&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-[8px] text-center px-0.5 leading-tight drop-shadow-lg",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:F})}),u&&!h&&!n&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx(K,{size:12,className:"text-white animate-pulse"})}),h&&G&&o===`${x}`&&t.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-20",children:t.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg py-2 px-3 shadow-xl whitespace-nowrap max-w-[200px] text-center",children:[t.jsx("div",{className:"font-bold mb-1",children:F}),t.jsx("div",{className:"text-gray-300 text-[10px]",children:G}),t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:t.jsx("div",{className:"border-4 border-transparent border-t-gray-900"})})]})})]})},e[6]=o,e[7]=L):L=e[7];const S=L;let P;e[8]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx(Ne,{title:"Card Templates"}),e[8]=P):P=e[8];let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(we,{title:"Card Templates",description:"List of your card templates",children:t.jsxs(H,{onClick:St,children:[t.jsx(Ge,{className:"mr-2 h-4 w-4"})," Create"]})}),e[9]=E):E=e[9];let y;e[10]!==l.length?(y=l.length===0&&t.jsxs($e,{className:"mt-8",children:[t.jsx(K,{className:"h-4 w-4"}),t.jsx(Te,{children:"No card templates yet. Create your first loyalty card template to get started!"})]}),e[10]=l.length,e[11]=y):y=e[11];let b;if(e[12]!==S||e[13]!==l){let g;e[15]!==S?(g=i=>t.jsxs(Ae,{className:"overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[t.jsx("div",{className:"relative h-64 p-6 mt-0",style:{backgroundColor:i.backgroundColor,backgroundImage:i.backgroundImage?`url(/${i.backgroundImage})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:t.jsx("div",{className:"h-full backdrop-blur-sm rounded-lg",style:{backgroundColor:i.backgroundImage?"rgba(0,0,0,0.2)":"transparent"},children:t.jsxs("div",{className:"p-4 h-full flex flex-col",children:[i.logo&&t.jsx("div",{className:"flex justify-center mb-2",children:t.jsx("img",{src:`/${i.logo}`,alt:"Logo",className:"h-12 w-12 object-cover rounded-full border-2 border-white shadow-lg"})}),t.jsx("h3",{className:"text-lg font-bold text-center mb-1 tracking-wide",style:{color:i.textColor},children:i.heading}),i.subheading&&t.jsx("p",{className:"text-center text-xs mb-3 opacity-90",style:{color:i.textColor},children:i.subheading}),t.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-3 flex-1",children:Array.from({length:i.stampsNeeded}).map((u,h)=>{const F=h+1,N=je(i.perks||[],F),q=h<Math.floor(i.stampsNeeded*.6);return t.jsx("div",{className:"flex flex-col items-center",children:t.jsx("div",{className:"w-8 h-8",children:t.jsx(S,{shape:i.stampShape,isFilled:q,isReward:!!N,rewardText:N?.reward,color:N?N.color:i.stampFilledColor,filledColor:i.stampFilledColor,emptyColor:i.stampEmptyColor,stampImage:i.stampImage,details:N?.details,index:`${i.id}-${h}`})})},h)})}),t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-[10px] opacity-75",style:{color:i.textColor},children:i.footer||"Loyalty Card"})})]})})}),t.jsx(De,{className:"pb-3",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs(Ce,{className:"text-lg flex items-center gap-2",children:[i.name,i.perks&&i.perks.length>0&&t.jsxs(J,{className:"text-xs bg-green-500 text-white",children:[t.jsx(Be,{className:"h-3 w-3 mr-1"}),i.perks.length," Perks"]}),i.is_expired&&t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(He,{children:t.jsxs(We,{children:[t.jsx(Ye,{asChild:!0,children:t.jsxs(J,{className:"bg-red-500",children:["Expired      ",t.jsx(ye,{className:"h-4 w-4 cursor-help"})]})}),t.jsx(Ve,{children:t.jsx("p",{children:"Expired loyalty card is not visible to customers"})})]})})})]}),t.jsxs(_e,{className:"mt-1",children:[i.stampsNeeded," stamps needed | Valid Until: ",i.valid_until_formatted]})]})})}),t.jsxs(Se,{className:"pt-0",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:i.mechanics}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(H,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>ue(i.id),children:[t.jsx(Ze,{className:"h-4 w-4 mr-1"}),"View"]}),t.jsxs(H,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>he(i.id),children:[t.jsx(Ke,{className:"h-4 w-4 mr-1"}),"Edit"]}),t.jsx(H,{variant:"destructive",size:"sm",onClick:()=>fe(i.id),children:t.jsx(Ue,{className:"h-4 w-4"})})]})]})]},i.id),e[15]=S,e[16]=g):g=e[16],b=l.map(g),e[12]=S,e[13]=l,e[14]=b}else b=e[14];let w;e[17]!==b?(w=t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-8",children:b}),e[17]=b,e[18]=w):w=e[18];let R;e[19]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsxs(At,{className:"flex items-center gap-2",children:[t.jsx(be,{className:"h-5 w-5 text-red-500"}),"Delete Loyalty Card Template?"]}),e[19]=R):R=e[19];let M;e[20]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs(bt,{children:[R,t.jsxs(Dt,{className:"space-y-2",children:[t.jsx("span",{className:"font-semibold text-gray-900",children:"Are you sure you want to delete this loyalty card template?"}),t.jsx("span",{children:"Customers who are already using this loyalty card might be shocked that it's gone. This action cannot be undone and will affect all existing customer cards using this template."})]})]}),e[20]=M):M=e[20];let I;e[21]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(_t,{onClick:ge,children:"Cancel"}),e[21]=I):I=e[21];let A;e[22]!==V?(A=t.jsxs(yt,{children:[M,t.jsxs(wt,{children:[I,t.jsx(Ct,{onClick:V,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Delete Template"})]})]}),e[22]=V,e[23]=A):A=e[23];let D;e[24]!==_||e[25]!==A?(D=t.jsx(jt,{open:_,onOpenChange:v,children:A}),e[24]=_,e[25]=A,e[26]=D):D=e[26];let O;return e[27]!==w||e[28]!==D||e[29]!==y?(O=t.jsxs(qe,{children:[P,E,y,w,D]}),e[27]=w,e[28]=D,e[29]=y,e[30]=O):O=e[30],O}function St(){return W.visit("/business/card-templates/create")}function $t(r,e){return r.find(s=>s.stampNumber===e)}function Tt(r){W.visit(`/business/card-templates/${r}`)}function kt(r){r.error?Z.error(r.error):Z.error("An error occured.")}function Lt(){Z.success("Deleted Successfully.")}function Pt(r){W.visit(`/business/card-templates/${r}/edit`)}export{ts as default};
