import{c as q,r as f,j as t,b as S,H as E}from"./app-D--nhdZS.js";import{A as G}from"./app-layout-CGDcj2VU.js";import{S as C,a as k,b as _,c as L,d as I}from"./select-BqaLS8Gj.js";/* empty css            */import"./button-BZ57029I.js";import"./mainLogo-BKLpzGjT.js";import"./index-CGshWIF6.js";import"./index-Cfqoozah.js";import"./index-ChSaXraI.js";import"./dropdown-menu-DeCQ7eDc.js";import"./index-CK7B955y.js";import"./index-D6b3eXot.js";import"./qr-code-BlVOYZ3H.js";import"./index-D-BJOf8x.js";import"./chevron-down-DjkvQgai.js";import"./check-Bk2TJbax.js";function X(a){const e=q.c(26),{code:l,cards:r,loyalty_card_id:o}=a,[n,c]=f.useState(!1);let m;e[0]!==r[0]||e[1]!==r.length||e[2]!==o?.toString?(m=o?.toString||r.length>0?r[0].id.toString():"",e[0]=r[0],e[1]=r.length,e[2]=o?.toString,e[3]=m):m=e[3];const[s,N]=f.useState(m);let i,x;e[4]!==o?(i=()=>{o&&N(o.toString())},x=[o],e[4]=o,e[5]=i,e[6]=x):(i=e[5],x=e[6]),f.useEffect(i,x);const[u,h]=f.useState(null);let p;e[7]!==s?(p=()=>{if(!s){h("Please select a loyalty card");return}c(!0),h(null),S.get("/business/issue-stamp",{loyalty_card_id:s}),console.log("Code generation requested for card:",s),c(!1)},e[7]=s,e[8]=p):p=e[8];const w=p;let b;e[9]!==s?(b=()=>{if(!s){h("Please select a loyalty card");return}c(!0),h(null),S.get("/business/issue-stamp",{loyalty_card_id:s}),console.log("New code generation requested for card:",s),c(!1)},e[9]=s,e[10]=b):b=e[10];const v=b;let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=t.jsx(E,{title:"Issue Stamp"}),e[11]=g):g=e[11];let d;e[12]!==r||e[13]!==l.code||e[14]!==l.created_at||e[15]!==l.qr_url||e[16]!==l.success||e[17]!==u||e[18]!==w||e[19]!==v||e[20]!==n||e[21]!==s?(d=l.success?t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 sm:p-8",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"inline-block p-2 bg-green-100 rounded-full mb-3 sm:mb-4",children:t.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-1",children:"Code Generated Successfully"}),t.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Generated on ",l.created_at]})]}),t.jsxs("div",{className:"border-t border-b border-gray-200 py-4 sm:py-6 mb-4 sm:mb-6",children:[t.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:t.jsx("img",{src:l.qr_url,alt:"QR Code",className:"w-48 h-48 sm:w-56 sm:h-56 md:w-64 md:h-64 border-2 border-gray-200 rounded-lg"})}),t.jsxs("div",{className:"text-center px-2",children:[t.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Or enter code manually:"}),t.jsx("div",{className:"inline-block bg-gray-100 px-4 sm:px-6 py-2 sm:py-3 rounded-lg",children:t.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-mono font-bold text-gray-900 tracking-wider break-all",children:l.code})})]})]}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-2 sm:mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs sm:text-sm font-medium text-yellow-800",children:"Important"}),t.jsx("p",{className:"text-xs sm:text-sm text-yellow-700 mt-1",children:"This code will expire in 15 minutes if not used. Customer must scan or enter the code in their app."})]})]})}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{htmlFor:"loyalty-card-new",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Loyalty Card for New Code"}),t.jsxs(C,{value:s,onValueChange:N,children:[t.jsx(k,{className:"w-full",children:t.jsx(_,{placeholder:"Select a loyalty card"})}),t.jsx(L,{children:r.map(R)})]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsx("button",{onClick:v,className:"flex-1 px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-600 text-white text-sm sm:text-base font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Generate New Code"})})]}):t.jsxs("div",{className:"bg-white rounded-lg shadow p-6 sm:p-8",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"mb-4 sm:mb-6",children:t.jsx("svg",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:"Ready to Issue a Stamp?"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-6 px-2",children:"Select a loyalty card and generate a unique code for your customer."})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{htmlFor:"loyalty-card",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Loyalty Card"}),r.length>0?t.jsxs(C,{value:s,onValueChange:N,children:[t.jsx(k,{className:"w-full",children:t.jsx(_,{placeholder:"Select a loyalty card"})}),t.jsx(L,{children:r.map(B)})]}):t.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-700 text-sm",children:"No loyalty cards available. Please create a loyalty card first."})]}),u&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm",children:u}),t.jsx("button",{onClick:w,disabled:n||r.length===0,className:"w-full px-6 py-3 bg-accent text-white font-medium rounded-lg hover:bg-accent/70 disabled:bg-accent/60 disabled:cursor-not-allowed transition-colors",children:n?"Generating...":"Generate Code"})]}),e[12]=r,e[13]=l.code,e[14]=l.created_at,e[15]=l.qr_url,e[16]=l.success,e[17]=u,e[18]=w,e[19]=v,e[20]=n,e[21]=s,e[22]=d):d=e[22];let y;e[23]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx("div",{className:"mt-4 sm:mt-6 text-center text-xs sm:text-sm text-gray-500 px-2",children:t.jsx("p",{children:"Customer should open their app and scan the QR code or enter the code manually."})}),e[23]=y):y=e[23];let j;return e[24]!==d?(j=t.jsxs(G,{children:[g,t.jsxs("div",{className:"w-full max-w-2xl mx-auto sm:mt-6 md:mt-8 sm:px-6 lg:px-8",children:[d,y]})]}),e[24]=d,e[25]=j):j=e[25],j}function R(a){return t.jsx(I,{value:a.id.toString(),children:a.name},a.id)}function B(a){return t.jsx(I,{value:a.id.toString(),children:a.name},a.id)}export{X as default};
